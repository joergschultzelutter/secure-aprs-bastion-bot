# Return Codes

## Table of Contents
<!--ts-->
* [How `secure-aprs-bastion-bot` uses return codes](#how-secure-aprs-bastion-bot-uses-return-codes)
* [Supported return codes](#supported-return-codes)
<!--te-->

## How `secure-aprs-bastion-bot` uses return codes
`secure-aprs-bastion-bot` was deliberately designed so that no output from the called programs is sent back to the requester. If necessary, such a return transmission can be implemented individually via the `--command-script` using either the supplied `send-aprs-message.py` script or other options such as [Apprise](https://www.github.com/caronc/apprise). The following return values are supported and will be sent as an APRS message response to the user:

The return codes, such as `200 ok`, are sent as APRS responses to the original user. This procedure allows a very short APRS message to be sent as confirmation that the requested command sequence has either already been completed or will be started as a separate process immediately after the APRS response is sent.

## Supported return codes
| Return value       | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `200 ok`           | The user's callsign and `--command-code` were found in the configuration file, the TOTP code was valid, the `--command-string` was executed, and the `--command-string` script was waited for until it finished executing _or_ got terminated in case the user had specified a `--watchdog-timespan` value for the command and the command ran longer than expected. This is the standard return code for a successful script execution where the [`--detached-launch`](/docs/configure.md#parameters) flas was _*not*_ set.   |
| `202 accepted`     | The user's callsign and `--command-code` were found in the configuration file, the TOTP code was valid, and the `--command-string` was started as a separate process because the user configuration included the [`--detached-launch`](/docs/configure.md#parameters) flag. No wait was performed for the `--command-string` script to finish.                                                                                                                                                                                 |
| `403 forbidden`    | This is the program's default return code. Possible causes of errors include: the callsign and/or `--command-code` are not present in the configuration file. The transmitted TOTP code is invalid. The transmitted TOTP code has already been used.                                                                                                                                                                                                                                                                           |
| `510 not extended` | The identified `--command-string` still contains placeholders after `core-aprs-client` [replaced the placeholders with the user's additional parameters](/docs/message-anatomy.md). Usually, this means that you created a user script with placeholders - but the APRS user did submit an insufficient/lower number of additional parameters to `core-aprs-client`.                                                                                                                                                           | 

> [!TIP]
> If you receive a `510 not extended` error, check the number of user-submittable parameter placeholders in your `--command-string` (`@0`..`@9`) against the number of additional parameters in your APRS message (see [message anatomy documentation](/docs/message-anatomy.md)); the latter must be at least equal to the number of user-transmittable parameter placeholders in your user script. If you transmit _more_ user parameters in your APRS message than are available in your `--command-string`, no error will be triggered; these additional parameters will simply be ignored.
